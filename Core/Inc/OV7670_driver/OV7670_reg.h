#ifndef OV7670_REG_H
#define OV7670_REG_H

#include "stm32f4xx_hal.h"

#define EOC 0xFF // end of file

const uint8_t OV7670r[][2] = {
	
	// Image format
	{0x12, 0x14},		//QVGA size, RGB mode
	{0x40, 0xd0},		//RGB565
	{0xb0, 0x84},		//Color mode
	
	// Hardware window
	{0x32, 0x80},		//HREF
	{0x17, 0x17},		//HSTART
	{0x18, 0x05},		//HSTOP
	{0x03, 0x0a},		//VREF
	{0x19, 0x02},		//VSTART
	{0x1a, 0x7a},		//VSTOP
    
	// Scalling numbers
	{0x70, 0x3a},		//X_SCALING
	{0x71, 0x35},		//Y_SCALING
	{0x72, 0x11},		//DCW_SCALING
	{0x73, 0xf1},		//PCLK_DIV_SCALING
	{0x11, 0x00},
	// Matrix coefficients
	{0x4f, 0x80},		{0x50, 0x80},
	{0x51, 0x00},		{0x52, 0x22},
	{0x53, 0x5e},		{0x54, 0x80},
	{0x58, 0x9e},
	
    {EOC, EOC}

};

// Registers
const uint8_t OV7670_reg[][2] = {
    
    /* Color mode related */
    {0x12, 0x14},         // QVGA, RGB 0001 0100
    {0x8C, 0x00},         // RGB444 Disable
    {0x40, 0xd0},  // RGB565, 00 - FF 1101 0000 8+4+1 
    
    // bez + 8 działa lepiej
    // {0x3A, 0x04 + 8 }
    {0x3A, 0x04},     // UYVY 
    {0x3D, 0x80},  // gamma enable, UV auto adjust, UYVY
    {0xB0, 0x84},       
    
    /* clock related */
    {0x11, 0x00},  // pre-scalar = 1/1 
    {0x0C, 0x04},  // DCW enable
    {0x3E, 0x1B},  // manual scaling, pclk/=2 // JAK to zmieniam to się zmienia obraz
    {0x70, 0x3A},  // scaling_xsc 0011 1010
    {0x71, 0x35},  // 
    {0x72, 0x11},  // down sample by 2 0010 0010
    {0x73, 0xf1},  // DSP clock /= 2
    /* windowing */
    {0x17, 0x16},
    {0x18, 0x04},
    {0x32, 0x80}, // HREF maska dolnych bitów
    {0x19, 0x02},
    {0x1A, 0x7A},
    {0x03, 0x0A}, // VREF: [3:2] VSTOP low bits, [1:0] VSTART low bits

/* color matrix coefficient */
    {0x4f, 0x80},
    {0x50, 0x80},
    {0x51, 0x00},
    {0x52, 0x22},
    {0x53, 0x5e},
    {0x54, 0x80},
    {0x58, 0x9e},

    {0x41, 0x38},  // edge enhancement, de-noise, AWG gain enabled

    {0x7b, 16},
    {0x7c, 30},
    {0x7d, 53},
    {0x7e, 90},
    {0x7f, 105},
    {0x80, 118},
    {0x81, 130},
    {0x82, 140},
    {0x83, 150},
    {0x84, 160},
    {0x85, 180},
    {0x86, 195},
    {0x87, 215},
    {0x88, 230},
    {0x89, 244},
    {0x7a, 16},
    /* others */
    // {0x1E, 0x31},  // mirror ov text is top
    {0x1E, 0x1a},  // mirror pins are top

    //  {0x42, 0x08}, // color bar

    {EOC, EOC}
};

#endif